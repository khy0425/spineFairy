<context>
# Overview  
SpinFairy(척추요정)는 사용자의 자세 교정과 건강한 습관 형성을 도와주는 Flutter 앱입니다. 집중 모드와 휴식 모드를 번갈아가며 사용자가 일정 시간 동안 집중하고, 적절한 휴식을 취하도록 돕습니다. 코딩, 공부, 업무 등 장시간 앉아서 작업하는 사람들을 위한 건강 관리 솔루션입니다.

# Core Features  
1. 포모도로 타이머 기능
   - 집중 모드(기본 50분)와 휴식 모드(기본 10분) 전환
   - 타이머 시간 사용자 정의 가능
   - 백그라운드에서도 작동 및 알림 제공

2. 캐릭터 인터랙션
   - 집중/휴식 상태에 따라 다른 감정을 표현하는 캐릭터
   - 상황별 동기 부여 메시지 제공
   - 귀여운 힐링 캐릭터 디자인

3. 휴식 모드 기능
   - 휴식 중 음악 재생 기능
   - 다양한 음악 트랙 제공
   - 사용자 경험 향상을 위한 애니메이션

4. 설정 및 사용자화
   - 사용자 이름 설정
   - 타이머 시간 조정
   - 알림 설정

# User Experience  
- 주요 사용자: 데스크 워커, 학생, 개발자 등 오랜 시간 앉아서 작업하는 사람들
- 핵심 사용자 플로우: 앱 실행 → 타이머 시작 → 집중 모드 → 휴식 모드 → 반복
- UI/UX 고려사항: 깔끔하고 직관적인 인터페이스, 부드러운 애니메이션, 힐링되는 색상 테마
</context>
<PRD>
# Technical Architecture  
1. 앱 구조
   - Flutter 프레임워크 기반 크로스 플랫폼 앱
   - Provider 패턴을 사용한 상태 관리
   - 서비스 클래스를 통한 기능 모듈화

2. 데이터 모델
   - User: 사용자 정보(이름, 설정 등)
   - Character: 캐릭터 정보 및 상태
   - RoutineLog: 집중/휴식 시간 기록

3. 주요 서비스
   - TimerService: 타이머 관리 및 상태 추적
   - MusicService: 휴식 시간 음악 재생
   - AdService: 광고 관리 (현재는 더미 구현)
   - CharacterMessageService: 캐릭터 메시지 관리

4. 외부 의존성
   - flutter_local_notifications: 로컬 알림
   - audioplayers: 음악 재생
   - provider: 상태 관리
   - shared_preferences: 로컬 데이터 저장

# Development Roadmap  
1. MVP 요구사항
   - 기본 타이머 기능(집중/휴식 모드)
   - 캐릭터 표시 및 감정 변화
   - 설정 화면(사용자 이름, 타이머 시간)
   - 기본 음악 재생 기능

2. 개선사항
   - 레이아웃 오버플로우 수정
   - 앱 아이콘 및 이름 변경
   - 음악 플레이어 기능 강화
   - 설정 화면 확장
   - 코틀린 플러그인 버전 업데이트
   - 광고 관련 코드 리팩토링

3. 향후 기능
   - 사용자 통계 및 분석
   - 더 다양한 캐릭터 테마
   - 클라우드 백업 및 동기화
   - 소셜 공유 기능

# Logical Dependency Chain
1. 기반 기능 (우선 개발)
   - 타이머 서비스 구현
   - 기본 UI 레이아웃 설계
   - 캐릭터 표시 화면 구현

2. 사용자 경험 개선
   - 음악 서비스 연동
   - 캐릭터 감정 표현 개선
   - 애니메이션 추가

3. 안정성 및 성능 향상
   - 레이아웃 오버플로우 해결
   - 코틀린 플러그인 버전 업데이트
   - 광고 서비스 최적화

# Risks and Mitigations  
1. 기술적 도전
   - 백그라운드 타이머 작동: Isolate와 알림을 조합하여 해결
   - 다양한 화면 크기: 반응형 레이아웃과 비율 기반 설계
   - 플러그인 호환성: 신중한 버전 관리 및 테스트

2. MVP 범위
   - 핵심 기능(타이머, 캐릭터)에 집중
   - 사용자 피드백을 통한 점진적 개선
   - 불필요한 기능은 후순위로 조정

3. 리소스 제약
   - 자체 제작 또는 무료 에셋 활용
   - 단순하고 효율적인 코드 구조 유지
   - 광고 관련 코드는 실제 구현 대신 더미 코드로 대체

# Appendix  
1. 참고 자료
   - Flutter 공식 문서
   - Material Design 가이드라인
   - 포모도로 기법 연구 자료

2. 기술 명세
   - Flutter 최소 버전: 3.7.2
   - Dart SDK: '>= 3.7.2 < 4.0.0'
   - 타겟 플랫폼: Android, iOS
   - 최소 Android SDK: 23
</PRD>